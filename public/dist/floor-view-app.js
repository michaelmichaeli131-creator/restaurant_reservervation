import{r as p,j as s,R as h,t as d,c as ve}from"./floor-index.js";const f="/floor_assets/",de=(r,l=1)=>{const m=Number(r);return Number.isFinite(m)?Math.max(.5,Math.min(1.6,m)):l},ue=r=>{const l=Number(r);return Number.isFinite(l)?Math.round(l/45)*45:0},pe=r=>{if(!r||r.startsWith("#"))return"parquet_blue";const l=r;return l==="parquet_blue"||l==="parquet_brown"||l==="slate_dark"||l==="navy_carpet"||l==="teal_terrazzo"?l:"parquet_blue"};function fe(r){return{parquet_blue:{bg:`url(${f}floor_parquet_blue.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},parquet_brown:{bg:`url(${f}floor_parquet_brown.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},slate_dark:{bg:`url(${f}floor_slate_dark.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},navy_carpet:{bg:`url(${f}floor_navy_carpet.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},teal_terrazzo:{bg:`url(${f}floor_teal_terrazzo.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"}}[r]}function he(r,l){const m=String(r||"square").toLowerCase(),w=Number(l||0);return m==="round"?`${f}${w>=9?"round_table_10.svg":"round_table4.svg"}`:m==="booth"?`${f}${w>=6?"large_booth.svg":"booth4.svg"}`:m==="rect"?`${f}${w>=10?"square_table10.svg":w>=6?"square_table6.svg":w>=4?"square_table4.svg":"square_table2.svg"}`:`${f}${w>=10?"square_table10.svg":w>=6?"square_table6.svg":w>=4?"square_table4.svg":"square_table2.svg"}`}function ge(r,l){const m=String(r||"").toLowerCase();return m==="door"?`${f}door.svg`:m==="wall"?`${f}wall.svg`:m==="divider"?`${f}divider.svg`:m==="chair"?`${f}chair.svg`:m==="bar"?`${f}bar.svg`:m==="plant"?`${f}plant.svg`:l?`${f}${l}.svg`:`${f}divider.svg`}function xe({layout:r,mode:l,onTableClick:m,selectedTableId:w}){const S=p.useRef(null),G=p.useRef(null),[L,Q]=p.useState(1),[D,E]=p.useState({x:0,y:0}),[ee,U]=p.useState(!1),[T,Y]=p.useState(!1),A=p.useRef(null),R=60,z=p.useMemo(()=>pe(r.floorColor),[r==null?void 0:r.id]),K=p.useMemo(()=>fe(z),[z]),M=p.useMemo(()=>{const t=Math.max(0,Number(r.gridRows??0)),e=Math.max(0,Number(r.gridCols??0)),n=(a,v,y)=>Math.max(v,Math.min(y,a));if(t<=0||e<=0)return{minX:0,minY:0,maxX:0,maxY:0,rows:t,cols:e};let o=0,i=0,b=e-1,c=t-1;const k=r.gridMask;if(Array.isArray(k)){const a=e*t,v=k.slice(0,a);for(;v.length<a;)v.push(1);let y=!0;for(let j=0;j<a;j++)if((v[j]??1)!==1){y=!1;break}if(!y){let j=!1,C=1/0,X=1/0,H=-1/0,W=-1/0;for(let F=0;F<a;F++){if((v[F]??1)!==1)continue;const Z=F%e,V=Math.floor(F/e);j=!0,Z<C&&(C=Z),V<X&&(X=V),Z>H&&(H=Z),V>W&&(W=V)}j&&(o=C,i=X,b=H,c=W)}}const N=(a,v,y,j)=>{const C=n(Number(a??0),0,e-1),X=n(Number(v??0),0,t-1),H=n(Number(y??1),1,e),W=n(Number(j??1),1,t);o=Math.min(o,C),i=Math.min(i,X),b=Math.max(b,C+H-1),c=Math.max(c,X+W-1)},O=Array.isArray(r.tables)?r.tables:[],$=Array.isArray(r.objects)?r.objects:[];for(const a of O)N(a.gridX??a.x,a.gridY??a.y,a.spanX,a.spanY);for(const a of $)N(a.gridX??a.x,a.gridY??a.y,a.spanX,a.spanY);const _=1;return o=n(o-_,0,e-1),i=n(i-_,0,t-1),b=n(b+_,0,e-1),c=n(c+_,0,t-1),{minX:o,minY:i,maxX:b,maxY:c,rows:t,cols:e}},[r==null?void 0:r.id,r==null?void 0:r.gridRows,r==null?void 0:r.gridCols,r==null?void 0:r.gridMask,r==null?void 0:r.tables,r==null?void 0:r.objects]),B=p.useRef(L);p.useEffect(()=>{B.current=L},[L]),p.useEffect(()=>{const t=n=>{n.code==="Space"&&U(!0)},e=n=>{n.code==="Space"&&(U(!1),Y(!1))};return window.addEventListener("keydown",t),window.addEventListener("keyup",e),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",e)}},[]);const I=t=>Math.max(l==="view"?.01:.4,Math.min(2.5,t)),g=()=>{if(!S.current||!G.current)return;const t=S.current,e=G.current,n=getComputedStyle(t),o=parseFloat(n.paddingLeft||"0")||0,i=parseFloat(n.paddingRight||"0")||0,b=parseFloat(n.paddingTop||"0")||0,c=parseFloat(n.paddingBottom||"0")||0,k=getComputedStyle(e),N=parseFloat(k.marginLeft||"0")||0,O=parseFloat(k.marginTop||"0")||0,$=12,_=Math.max(1,t.clientWidth-o-i-$*2),a=Math.max(1,t.clientHeight-b-c-$*2),{minX:v,minY:y,maxX:j,maxY:C}=M,X=Math.max(1,(j-v+1)*R),H=Math.max(1,(C-y+1)*R),W=l==="view"?1:1.2,F=I(Math.min(_/X,a/H,W));Q(F);const Z=Math.round(o+$+(_-X*F)/2-v*R*F-N),V=Math.round(b+$+(a-H*F)/2-y*R*F-O);E({x:Z,y:V}),t.scrollLeft=0,t.scrollTop=0};p.useEffect(()=>{requestAnimationFrame(g)},[r==null?void 0:r.id,M.minX,M.minY,M.maxX,M.maxY]),p.useEffect(()=>{if(!S.current)return;let t=0;const e=new ResizeObserver(()=>{cancelAnimationFrame(t),t=requestAnimationFrame(g)});return e.observe(S.current),()=>{cancelAnimationFrame(t),e.disconnect()}},[r==null?void 0:r.id]);const se=(t,e,n,o=B.current)=>{if(!S.current)return;const i=S.current.getBoundingClientRect(),b=e-i.left,c=n-i.top;E(k=>{const N=t/(o||1);return{x:Math.round(b-(b-k.x)*N),y:Math.round(c-(c-k.y)*N)}}),Q(t)};p.useEffect(()=>{const t=S.current;if(!t)return;const e=n=>{if(!(n.ctrlKey||n.metaKey))return;n.preventDefault(),n.stopPropagation();const o=I(B.current*(n.deltaY>0?.9:1.1));se(o,n.clientX,n.clientY,B.current)};return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)},[l]);const x=t=>{const e=t.target;if(l==="view"){if(t.button!==0||e!=null&&e.closest(".fe-canvas-controls, button, a, input, textarea, select"))return;t.preventDefault(),A.current={moved:!1};const N={x:t.clientX,y:t.clientY},O={...D};let $=!1;const _=v=>{const y=v.clientX-N.x,j=v.clientY-N.y,C=Math.abs(y)+Math.abs(j);!$&&C>4&&($=!0,A.current&&(A.current.moved=!0),Y(!0)),$&&E({x:O.x+y,y:O.y+j})},a=()=>{$&&Y(!1),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",a),A.current&&!A.current.moved&&(A.current=null)};window.addEventListener("mousemove",_),window.addEventListener("mouseup",a);return}const n=t.button===1,o=ee&&t.button===0;if(!n&&!o)return;t.preventDefault(),Y(!0);const i={x:t.clientX,y:t.clientY},b={...D},c=N=>{E({x:b.x+(N.clientX-i.x),y:b.y+(N.clientY-i.y)})},k=()=>{Y(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",k)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",k)},u=p.useRef(null),q=t=>{if(l!=="view"||t.touches.length!==1)return;const e=t.touches[0],n=t.target;n!=null&&n.closest(".table, .floor-object, .fe-canvas-controls, button, a, input, textarea, select")||(Y(!0),u.current={startX:e.clientX,startY:e.clientY,panX:D.x,panY:D.y,active:!0})},ae=t=>{if(l!=="view")return;const e=u.current;if(!e||!e.active||t.touches.length!==1)return;const n=t.touches[0];E({x:e.panX+(n.clientX-e.startX),y:e.panY+(n.clientY-e.startY)})},re=()=>{l==="view"&&(u.current=null,Y(!1))},P=t=>Math.max(1,Number(t)||1)*R,ne=t=>{const e=(t||"").toLowerCase();return e.includes("occup")||e==="busy"||e==="taken"?"occupied":e.includes("reserv")||e.includes("book")?"reserved":e.includes("dirty")||e.includes("need")||e.includes("clean")?"dirty":"empty"},ie=p.useMemo(()=>{const t=new Map;return(Array.isArray(r.tableStatuses)?r.tableStatuses:[]).forEach(e=>{const n=e&&e.tableId?String(e.tableId):"";n&&t.set(n,{status:ne(String(e.status||"empty")),guestName:e.guestName??null,guestCount:e.guestCount??null,orderId:e.orderId??null})}),t},[r]),oe=p.useMemo(()=>{const t=new Map;return(Array.isArray(r.tableStatuses)?r.tableStatuses:[]).forEach(e=>{const n=Number(e&&(e.tableNumber??0));!Number.isFinite(n)||n<=0||t.set(n,{status:ne(String(e.status||"empty")),guestName:e.guestName??null,guestCount:e.guestCount??null,orderId:e.orderId??null})}),t},[r]),le=t=>{const e=t.id?ie.get(String(t.id)):void 0;if(e)return e;const n=Number(t.tableNumber??0);if(Number.isFinite(n)&&n>0){const o=oe.get(n);if(o)return o}return{status:"empty"}};return s.jsxs("div",{className:`editor-canvas ${T?"is-panning":""}`,ref:S,onMouseDown:x,onTouchStart:q,onTouchMove:ae,onTouchEnd:re,style:{position:"relative",touchAction:"none",overscrollBehavior:"contain"},children:[s.jsxs("div",{className:"fe-canvas-controls",children:[s.jsx("button",{className:"btn-icon-small",onClick:()=>{var e;const t=(e=S.current)==null?void 0:e.getBoundingClientRect();se(I(L*1.1),((t==null?void 0:t.left)||0)+40,((t==null?void 0:t.top)||0)+40)},title:"Zoom in",children:"＋"}),s.jsx("button",{className:"btn-icon-small",onClick:()=>{var e;const t=(e=S.current)==null?void 0:e.getBoundingClientRect();se(I(L*.9),((t==null?void 0:t.left)||0)+40,((t==null?void 0:t.top)||0)+40)},title:"Zoom out",children:"－"}),s.jsx("button",{className:"btn-icon-small",onClick:g,title:"Fit to screen",children:"⤢"}),s.jsxs("div",{className:"fe-zoom-readout",children:[Math.round(L*100),"%"]}),s.jsx("div",{className:"fe-hint",children:ee?"Pan: drag":"Tip: hold Space to pan, Ctrl+wheel to zoom"})]}),s.jsx("div",{className:"fe-grid",ref:G,onClickCapture:t=>{var e;l==="view"&&(e=A.current)!=null&&e.moved&&(t.preventDefault(),t.stopPropagation(),A.current=null)},style:{direction:"ltr",gridTemplateColumns:`repeat(${r.gridCols}, ${R}px)`,gridTemplateRows:`repeat(${r.gridRows}, ${R}px)`,transform:`translate(${D.x}px, ${D.y}px) scale(${L})`,transformOrigin:"0 0","--cell":`${R}px`,"--floor-bg":K.bg,"--floor-bg-size":K.size,"--floor-bg-repeat":K.repeat,"--floor-bg-position":K.pos},children:Array.from({length:r.gridRows*r.gridCols}).map((t,e)=>{var _;const n=Math.floor(e/r.gridCols),o=e%r.gridCols,i=r.tables.find(a=>o>=a.gridX&&o<a.gridX+(a.spanX||1)&&n>=a.gridY&&n<a.gridY+(a.spanY||1)),c=(r.objects??[]).find(a=>o>=a.gridX&&o<a.gridX+(a.spanX||1)&&n>=a.gridY&&n<a.gridY+(a.spanY||1)),k=!!i&&i.gridX===o&&i.gridY===n,N=!!c&&c.gridX===o&&c.gridY===n,O=n*r.gridCols+o,$=(((_=r.gridMask)==null?void 0:_[O])??1)===1;return s.jsxs("div",{className:`fe-grid-cell ${$?"active":"inactive"}`,children:[N&&c&&s.jsxs("div",{className:`floor-object type-${c.type}`,style:{width:`${P(c.spanX)}px`,height:`${P(c.spanY)}px`,transform:`rotate(${ue(c.rotationDeg??c.rotation??0)}deg)`,cursor:l==="view"?"default":"grab"},children:[s.jsx("img",{className:`fe-asset fe-asset--${(c.assetFile||"").replace(/[^a-z0-9]+/gi,"_").toLowerCase()}`,style:{transform:`scale(${de(c.scale,1)})`},src:c.assetFile?`${f}${c.assetFile}`:ge(c.type,c.label),alt:""}),c.label&&s.jsx("div",{className:"obj-label",children:c.label})]}),k&&i&&(()=>{const a=le(i),v=String(a.status||"empty"),y=w&&String(w)===String(i.id),j=l==="view",C=v==="occupied"?"תפוס":v==="reserved"?"שמור":v==="dirty"?"מלוכלך":"פנוי",X=a.guestCount!=null&&a.guestCount!==""?` · ${a.guestCount}`:"";return s.jsxs("div",{className:`table floor-table status-${v} ${String(i.shape||"square")} ${y?"is-selected":""}`,onClick:()=>m==null?void 0:m(i.id),style:{position:"absolute",top:0,left:0,width:`${P(i.spanX)}px`,height:`${P(i.spanY)}px`,cursor:l==="view"?"pointer":"default"},children:[s.jsx("div",{className:"fe-table-visual","data-asset":i.assetFile||"",children:s.jsx("img",{className:`fe-asset fe-asset--${(i.assetFile||"").replace(/[^a-z0-9]+/gi,"_").toLowerCase()}`,style:{transform:`rotate(${ue(i.rotationDeg??i.rotation??0)}deg) scale(${de(i.scale,1)})`},src:i.assetFile?`${f}${i.assetFile}`:he(i.shape,i.seats),alt:""})}),s.jsxs("div",{className:"fe-table-overlay",children:[s.jsx("div",{className:"table-label",children:i.name||(i.tableNumber!=null?`Table ${i.tableNumber}`:"Table")}),i.seats!=null&&s.jsxs("div",{className:"table-seats",children:[i.seats," seats"]})]}),j&&s.jsxs("div",{className:`sbv-status-pill is-${v}`,children:[s.jsx("span",{className:"sbv-dot"}),s.jsxs("span",{className:"sbv-status-text",children:[C,X]})]})]})})()]},e)})})]})}function Ne(r){const l=(r||"").toLowerCase();return l==="occupied"||l==="busy"||l==="taken"?"occupied":l==="reserved"||l==="booked"?"reserved":l==="dirty"||l==="needs_cleaning"?"dirty":"empty"}function te(r){return d(`floor.status.${r}`,r)}function je({restaurantId:r,mountMode:l="page"}){const[m,w]=h.useState([]),[S,G]=h.useState(null),[L,Q]=h.useState(null),[D,E]=h.useState(!0),[ee,U]=h.useState(null),[T,Y]=h.useState(null),[A,R]=h.useState([]),[z,K]=h.useState(null),M=typeof document<"u"?document.getElementById("sb-floor-root"):null,B=String((M==null?void 0:M.getAttribute("data-click-mode"))||(M==null?void 0:M.getAttribute("data-mode"))||(l==="lobby"?"lobby":"page")).toLowerCase();h.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/floor-sections/${r}`);if(!e.ok)return;const n=await e.json(),o=Array.isArray(n)?n:(n==null?void 0:n.sections)??[];o.sort((i,b)=>(i.displayOrder??0)-(b.displayOrder??0)),R(o)}catch{}})()},[r]);const I=h.useCallback(async()=>{try{const e=await fetch(`/api/floor-layouts/${r}/active`,{headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.json(),o=n&&n.id?n:(n==null?void 0:n.activeLayout)??null;if(!o){w([]),G(null),Q(null),U(d("host.no_floor_plan","No active floor plan")),E(!1);return}w([o]),G(o.id),Q(i=>i??o.id),U(null),E(!1),T&&((o.tables||[]).some(b=>String(b.id)===String(T))||Y(null))}catch(e){U(d("host.err_load_map","Error loading floor map")+`: ${(e==null?void 0:e.message)??"unknown"}`),E(!1)}},[r,T]);h.useEffect(()=>{I();const e=setInterval(I,5e3);return()=>clearInterval(e)},[I]);const g=h.useMemo(()=>L?m.find(e=>e.id===L)??null:null,[m,L]),se=h.useMemo(()=>g?z?{...g,tables:(g.tables||[]).filter(e=>e.sectionId===z)}:g:null,[g,z]),x=h.useMemo(()=>!g||!T?null:(g.tables||[]).find(e=>String(e.id)===String(T))??null,[g,T]),u=h.useMemo(()=>{if(!g||!x)return null;const e=g.tableStatuses;if(!Array.isArray(e))return null;const n=e.find(o=>String(o.tableId)===String(x.id));return n||(e.find(o=>o.tableNumber===x.number)??null)},[g,x]),q=h.useMemo(()=>Ne(u==null?void 0:u.status),[u]),ae=e=>{Y(e)},re=()=>Y(null),P=async e=>{const n=x==null?void 0:x.id;if(n)try{const o=await fetch(`/api/tables/${r}/${n}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})});if(!o.ok){const i=await o.text().catch(()=>"");throw new Error(i||`HTTP ${o.status}`)}await I()}catch(o){console.error("Failed to update table status:",o)}},ne=async()=>{await P("dirty")},ie=async()=>{await P("empty")},oe=async()=>{await P("reserved")},le=async()=>{await P("empty")},t=`floor-editor sb-floor-view ${l==="lobby"?"is-embed":""}`;return D?s.jsx("div",{className:t,children:s.jsx("div",{className:"sbv-loading",children:d("floor.loading","Loading floor plan...")})}):ee||!g?s.jsx("div",{className:t,children:s.jsxs("div",{className:"sbv-error",children:[s.jsx("div",{className:"sbv-error-title",children:d("host.err_load_map","Cannot load floor map")}),s.jsx("div",{className:"sbv-error-sub",children:ee??d("host.err_load_map","Error loading floor map")}),s.jsx("button",{className:"sbv-retry",onClick:I,children:d("common.btn_refresh","Retry")})]})}):s.jsx("div",{className:t,children:s.jsxs("div",{className:"sbv-shell",children:[s.jsxs("div",{className:"sbv-left",children:[s.jsxs("div",{className:"layout-tabs-bar sbv-view-topbar",children:[s.jsxs("div",{className:"sbv-topbar-left",children:[s.jsx("div",{className:"sbv-topbar-title",children:d("host.floor_map_title","Restaurant Map (Live)")}),s.jsx("div",{className:"sbv-topbar-sub",children:d("floor.hints.controls","Drag to pan, Ctrl+wheel to zoom")})]}),s.jsxs("div",{className:"sbv-legend","aria-label":"Legend",children:[s.jsxs("span",{className:"sbv-pill is-empty",children:[s.jsx("span",{className:"sbv-dot"})," ",te("empty")]}),s.jsxs("span",{className:"sbv-pill is-occupied",children:[s.jsx("span",{className:"sbv-dot"})," ",te("occupied")]}),s.jsxs("span",{className:"sbv-pill is-reserved",children:[s.jsx("span",{className:"sbv-dot"})," ",te("reserved")]}),s.jsxs("span",{className:"sbv-pill is-dirty",children:[s.jsx("span",{className:"sbv-dot"})," ",te("dirty")]})]}),A.length>1&&s.jsxs("div",{className:"sbv-section-tabs",role:"tablist","aria-label":d("floor.sections.title","Sections"),children:[s.jsx("button",{className:`sbv-section-tab ${z===null?"is-active":""}`,onClick:()=>K(null),role:"tab","aria-selected":z===null,children:d("common.all","All")}),A.map(e=>s.jsx("button",{className:`sbv-section-tab ${z===e.id?"is-active":""}`,onClick:()=>K(e.id),role:"tab","aria-selected":z===e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:"editor-content sbv-editor-content",children:s.jsx(xe,{layout:se,selectedTableId:T,onTableClick:ae,mode:"view"})})]}),s.jsx("aside",{className:`sbv-right ${l==="lobby"&&T?"open":""}`,"aria-label":d("host.table_details","Table details"),children:T?s.jsxs("div",{className:"sbv-right-panel",role:"dialog","aria-modal":"false",children:[s.jsxs("div",{className:"sbv-drawer-header",children:[s.jsx("div",{className:"sbv-drawer-title",children:d("host.table_details","Table Details")}),s.jsx("button",{className:"sbv-close",onClick:re,"aria-label":d("common.btn_close","Close"),children:"✕"})]}),s.jsxs("div",{className:"sbv-drawer-body",children:[s.jsxs("div",{className:"sbv-table-number",children:[d("host.table_label","Table")," ",(x==null?void 0:x.number)??"—"]}),s.jsxs("div",{className:`sbv-status-row is-${q}`,children:[s.jsx("span",{className:"sbv-status-dot"}),s.jsx("span",{className:"sbv-status-label",children:d("host.table_status_label","Table Status")}),s.jsx("span",{className:"sbv-status-value",children:te(q)})]}),s.jsxs("div",{className:"sbv-kv",children:[s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:d("host.guest_name","Guest Name")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.guestName)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:d("host.num_guests","Guests")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.guestCount)!=null?String(u.guestCount):"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:d("host.reservation_time","Reservation Time")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.reservationTime)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:d("pos.waiter.items_label","Items")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.itemsCount)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:d("pos.waiter.subtotal","Subtotal")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.subtotal)??"—"})]})]})]}),s.jsxs("div",{className:"sbv-drawer-footer",children:[B==="lobby"||B==="waiter"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sbv-secondary-btn",onClick:ne,disabled:q==="dirty",children:d("floor.mark_dirty","Mark Dirty")}),s.jsx("button",{className:"sbv-success-btn",onClick:ie,disabled:q!=="dirty",children:d("floor.mark_clean","Mark Clean")})]}):null,B==="host"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sbv-primary-btn",onClick:oe,disabled:q==="reserved",children:d("floor.mark_reserved","Mark Reserved")}),s.jsx("button",{className:"sbv-secondary-btn",onClick:le,disabled:q==="empty",children:d("floor.mark_empty","Mark Empty")})]}):null,q==="occupied"&&(u!=null&&u.orderId)&&(x!=null&&x.number)?s.jsx("a",{className:"sbv-primary-btn",href:`/waiter/${r}/${x.number}`,children:d("pos.waiter.btn_open_order","Open Order")}):null,s.jsx("button",{className:"sbv-secondary-btn",onClick:re,children:d("common.btn_close","Close")})]})]}):s.jsxs("div",{className:"sbv-right-empty",children:[s.jsx("div",{className:"sbv-right-empty-title",children:d("host.table_details","Table Details")}),s.jsx("div",{className:"sbv-right-empty-sub",children:d("host.floor_map_help","Select a table on the map to view details.")})]})})]})})}const J=document.getElementById("sb-floor-root");if(!J)throw new Error("Missing #sb-floor-root");const me=J.getAttribute("data-rid")||J.getAttribute("data-restaurant-id")||"",ce=J.getAttribute("data-click-mode")||J.getAttribute("data-mode")||"page",be=ce==="lobby"||ce==="host"?"lobby":"page";console.info("[FloorView] mount",{rid:me,mountMode:be,clickMode:ce});ve.createRoot(J).render(s.jsx(h.StrictMode,{children:s.jsx(je,{restaurantId:me,mountMode:be})}));
