import{r as h,j as s,R as x,t as c,c as ve}from"./floor-index.js";const g="/floor_assets/",ie=(r,i=1)=>{const p=Number(r);return Number.isFinite(p)?Math.max(.5,Math.min(1.6,p)):i},le=r=>{const i=Number(r);return Number.isFinite(i)?Math.round(i/45)*45:0},pe=r=>{if(!r||r.startsWith("#"))return"parquet_blue";const i=r;return i==="parquet_blue"||i==="parquet_brown"||i==="slate_dark"||i==="navy_carpet"||i==="teal_terrazzo"?i:"parquet_blue"};function fe(r){return{parquet_blue:{bg:`url(${g}floor_parquet_blue.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},parquet_brown:{bg:`url(${g}floor_parquet_brown.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},slate_dark:{bg:`url(${g}floor_slate_dark.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},navy_carpet:{bg:`url(${g}floor_navy_carpet.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"},teal_terrazzo:{bg:`url(${g}floor_teal_terrazzo.svg)`,size:"240px 240px",repeat:"repeat",pos:"center"}}[r]}function he(r,i){const p=String(r||"square").toLowerCase(),j=Number(i||0);return p==="round"?`${g}${j>=9?"round_table_10.svg":"round_table4.svg"}`:p==="booth"?`${g}${j>=6?"large_booth.svg":"booth4.svg"}`:p==="rect"?`${g}${j>=10?"square_table10.svg":j>=6?"square_table6.svg":j>=4?"square_table4.svg":"square_table2.svg"}`:`${g}${j>=10?"square_table10.svg":j>=6?"square_table6.svg":j>=4?"square_table4.svg":"square_table2.svg"}`}function ge(r,i){const p=String(r||"").toLowerCase();return p==="door"?`${g}door.svg`:p==="wall"?`${g}wall.svg`:p==="divider"?`${g}divider.svg`:p==="chair"?`${g}chair.svg`:p==="bar"?`${g}bar.svg`:p==="plant"?`${g}plant.svg`:i?`${g}${i}.svg`:`${g}divider.svg`}function xe({layout:r,mode:i,onTableClick:p,selectedTableId:j}){const k=h.useRef(null),O=h.useRef(null),[_,W]=h.useState(1),[z,T]=h.useState({x:0,y:0}),[G,H]=h.useState(!1),[M,S]=h.useState(!1),L=h.useRef(null),Y=60,X=h.useMemo(()=>pe(r.floorColor),[r==null?void 0:r.id]),B=h.useMemo(()=>fe(X),[X]),C=h.useMemo(()=>{const t=Math.max(0,Number(r.gridRows??0)),e=Math.max(0,Number(r.gridCols??0)),n=(m,d,w)=>Math.max(d,Math.min(w,m));if(t<=0||e<=0)return{minX:0,minY:0,maxX:0,maxY:0,rows:t,cols:e};let o=1/0,a=1/0,v=-1/0,l=-1/0,y=!1;const N=(m,d,w,E)=>{const I=n(Number(m??0),0,e-1),D=n(Number(d??0),0,t-1),K=n(Number(w??1),1,e),se=n(Number(E??1),1,t);o=Math.min(o,I),a=Math.min(a,D),v=Math.max(v,I+K-1),l=Math.max(l,D+se-1),y=!0},P=Array.isArray(r.tables)?r.tables:[],$=Array.isArray(r.objects)?r.objects:[];for(const m of P)N(m.gridX??m.x,m.gridY??m.y,m.spanX,m.spanY);for(const m of $)N(m.gridX??m.x,m.gridY??m.y,m.spanX,m.spanY);return y?(o=n(o-1,0,e-1),a=n(a-1,0,t-1),v=n(v+1,0,e-1),l=n(l+1,0,t-1)):(o=0,a=0,v=e-1,l=t-1),{minX:o,minY:a,maxX:v,maxY:l,rows:t,cols:e}},[r==null?void 0:r.id,r==null?void 0:r.gridRows,r==null?void 0:r.gridCols,r==null?void 0:r.tables,r==null?void 0:r.objects]),q=h.useRef(_);h.useEffect(()=>{q.current=_},[_]),h.useEffect(()=>{const t=n=>{n.code==="Space"&&H(!0)},e=n=>{n.code==="Space"&&(H(!1),S(!1))};return window.addEventListener("keydown",t),window.addEventListener("keyup",e),()=>{window.removeEventListener("keydown",t),window.removeEventListener("keyup",e)}},[]);const A=t=>Math.max(i==="view"?.01:.4,Math.min(2.5,t)),f=()=>{if(!k.current||!O.current)return;const t=k.current,e=O.current,n=getComputedStyle(t),o=parseFloat(n.paddingLeft||"0")||0,a=parseFloat(n.paddingRight||"0")||0,v=parseFloat(n.paddingTop||"0")||0,l=parseFloat(n.paddingBottom||"0")||0,y=getComputedStyle(e),N=parseFloat(y.marginLeft||"0")||0,P=parseFloat(y.marginTop||"0")||0,$=12,m=Math.max(1,t.clientWidth-o-a-$*2),d=Math.max(1,t.clientHeight-v-l-$*2),{minX:w,minY:E,maxX:I,maxY:D}=C,K=Math.max(1,(I-w+1)*Y),se=Math.max(1,(D-E+1)*Y),ue=i==="view"?1:1.2,V=A(Math.min(m/K,d/se,ue));W(V);const me=Math.round(o+$+(m-K*V)/2-w*Y*V-N),be=Math.round(v+$+(d-se*V)/2-E*Y*V-P);T({x:me,y:be}),t.scrollLeft=0,t.scrollTop=0};h.useEffect(()=>{requestAnimationFrame(f)},[r==null?void 0:r.id,C.minX,C.minY,C.maxX,C.maxY]),h.useEffect(()=>{if(!k.current)return;let t=0;const e=new ResizeObserver(()=>{cancelAnimationFrame(t),t=requestAnimationFrame(f)});return e.observe(k.current),()=>{cancelAnimationFrame(t),e.disconnect()}},[r==null?void 0:r.id]);const Z=(t,e,n,o=q.current)=>{if(!k.current)return;const a=k.current.getBoundingClientRect(),v=e-a.left,l=n-a.top;T(y=>{const N=t/(o||1);return{x:Math.round(v-(v-y.x)*N),y:Math.round(l-(l-y.y)*N)}}),W(t)};h.useEffect(()=>{const t=k.current;if(!t)return;const e=n=>{if(!(n.ctrlKey||n.metaKey))return;n.preventDefault(),n.stopPropagation();const o=A(q.current*(n.deltaY>0?.9:1.1));Z(o,n.clientX,n.clientY,q.current)};return t.addEventListener("wheel",e,{passive:!1}),()=>t.removeEventListener("wheel",e)},[i]);const b=t=>{const e=t.target;if(i==="view"){if(t.button!==0||e!=null&&e.closest(".fe-canvas-controls, button, a, input, textarea, select"))return;t.preventDefault(),L.current={moved:!1};const N={x:t.clientX,y:t.clientY},P={...z};let $=!1;const m=w=>{const E=w.clientX-N.x,I=w.clientY-N.y,D=Math.abs(E)+Math.abs(I);!$&&D>4&&($=!0,L.current&&(L.current.moved=!0),S(!0)),$&&T({x:P.x+E,y:P.y+I})},d=()=>{$&&S(!1),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",d),L.current&&!L.current.moved&&(L.current=null)};window.addEventListener("mousemove",m),window.addEventListener("mouseup",d);return}const n=t.button===1,o=G&&t.button===0;if(!n&&!o)return;t.preventDefault(),S(!0);const a={x:t.clientX,y:t.clientY},v={...z},l=N=>{T({x:v.x+(N.clientX-a.x),y:v.y+(N.clientY-a.y)})},y=()=>{S(!1),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",y)};window.addEventListener("mousemove",l),window.addEventListener("mouseup",y)},u=h.useRef(null),F=t=>{if(i!=="view"||t.touches.length!==1)return;const e=t.touches[0],n=t.target;n!=null&&n.closest(".table, .floor-object, .fe-canvas-controls, button, a, input, textarea, select")||(S(!0),u.current={startX:e.clientX,startY:e.clientY,panX:z.x,panY:z.y,active:!0})},te=t=>{if(i!=="view")return;const e=u.current;if(!e||!e.active||t.touches.length!==1)return;const n=t.touches[0];T({x:e.panX+(n.clientX-e.startX),y:e.panY+(n.clientY-e.startY)})},Q=()=>{i==="view"&&(u.current=null,S(!1))},R=t=>Math.max(1,Number(t)||1)*Y,ee=t=>{const e=(t||"").toLowerCase();return e.includes("occup")||e==="busy"||e==="taken"?"occupied":e.includes("reserv")||e.includes("book")?"reserved":e.includes("dirty")||e.includes("need")||e.includes("clean")?"dirty":"empty"},ne=h.useMemo(()=>{const t=new Map;return(Array.isArray(r.tableStatuses)?r.tableStatuses:[]).forEach(e=>{const n=e&&e.tableId?String(e.tableId):"";n&&t.set(n,{status:ee(String(e.status||"empty")),guestName:e.guestName??null,guestCount:e.guestCount??null,orderId:e.orderId??null})}),t},[r]),re=h.useMemo(()=>{const t=new Map;return(Array.isArray(r.tableStatuses)?r.tableStatuses:[]).forEach(e=>{const n=Number(e&&(e.tableNumber??0));!Number.isFinite(n)||n<=0||t.set(n,{status:ee(String(e.status||"empty")),guestName:e.guestName??null,guestCount:e.guestCount??null,orderId:e.orderId??null})}),t},[r]),ae=t=>{const e=t.id?ne.get(String(t.id)):void 0;if(e)return e;const n=Number(t.tableNumber??0);if(Number.isFinite(n)&&n>0){const o=re.get(n);if(o)return o}return{status:"empty"}};return s.jsxs("div",{className:`editor-canvas ${M?"is-panning":""}`,ref:k,onMouseDown:b,onTouchStart:F,onTouchMove:te,onTouchEnd:Q,style:{position:"relative",touchAction:"none",overscrollBehavior:"contain"},children:[s.jsxs("div",{className:"fe-canvas-controls",children:[s.jsx("button",{className:"btn-icon-small",onClick:()=>{var e;const t=(e=k.current)==null?void 0:e.getBoundingClientRect();Z(A(_*1.1),((t==null?void 0:t.left)||0)+40,((t==null?void 0:t.top)||0)+40)},title:"Zoom in",children:"＋"}),s.jsx("button",{className:"btn-icon-small",onClick:()=>{var e;const t=(e=k.current)==null?void 0:e.getBoundingClientRect();Z(A(_*.9),((t==null?void 0:t.left)||0)+40,((t==null?void 0:t.top)||0)+40)},title:"Zoom out",children:"－"}),s.jsx("button",{className:"btn-icon-small",onClick:f,title:"Fit to screen",children:"⤢"}),s.jsxs("div",{className:"fe-zoom-readout",children:[Math.round(_*100),"%"]}),s.jsx("div",{className:"fe-hint",children:G?"Pan: drag":"Tip: hold Space to pan, Ctrl+wheel to zoom"})]}),s.jsx("div",{className:"fe-grid",ref:O,onClickCapture:t=>{var e;i==="view"&&(e=L.current)!=null&&e.moved&&(t.preventDefault(),t.stopPropagation(),L.current=null)},style:{direction:"ltr",gridTemplateColumns:`repeat(${r.gridCols}, ${Y}px)`,gridTemplateRows:`repeat(${r.gridRows}, ${Y}px)`,transform:`translate(${z.x}px, ${z.y}px) scale(${_})`,transformOrigin:"0 0","--cell":`${Y}px`,"--floor-bg":B.bg,"--floor-bg-size":B.size,"--floor-bg-repeat":B.repeat,"--floor-bg-position":B.pos},children:Array.from({length:r.gridRows*r.gridCols}).map((t,e)=>{var m;const n=Math.floor(e/r.gridCols),o=e%r.gridCols,a=r.tables.find(d=>o>=d.gridX&&o<d.gridX+(d.spanX||1)&&n>=d.gridY&&n<d.gridY+(d.spanY||1)),l=(r.objects??[]).find(d=>o>=d.gridX&&o<d.gridX+(d.spanX||1)&&n>=d.gridY&&n<d.gridY+(d.spanY||1)),y=!!a&&a.gridX===o&&a.gridY===n,N=!!l&&l.gridX===o&&l.gridY===n,P=n*r.gridCols+o,$=(((m=r.gridMask)==null?void 0:m[P])??1)===1;return s.jsxs("div",{className:`fe-grid-cell ${$?"active":"inactive"}`,children:[N&&l&&s.jsxs("div",{className:`floor-object type-${l.type}`,style:{width:`${R(l.spanX)}px`,height:`${R(l.spanY)}px`,transform:`rotate(${le(l.rotationDeg??l.rotation??0)}deg)`,cursor:i==="view"?"default":"grab"},children:[s.jsx("img",{className:`fe-asset fe-asset--${(l.assetFile||"").replace(/[^a-z0-9]+/gi,"_").toLowerCase()}`,style:{transform:`scale(${ie(l.scale,1)})`},src:l.assetFile?`${g}${l.assetFile}`:ge(l.type,l.label),alt:""}),l.label&&s.jsx("div",{className:"obj-label",children:l.label})]}),y&&a&&(()=>{const d=ae(a),w=String(d.status||"empty"),E=j&&String(j)===String(a.id),I=i==="view",D=w==="occupied"?"תפוס":w==="reserved"?"שמור":w==="dirty"?"מלוכלך":"פנוי",K=d.guestCount!=null&&d.guestCount!==""?` · ${d.guestCount}`:"";return s.jsxs("div",{className:`table floor-table status-${w} ${String(a.shape||"square")} ${E?"is-selected":""}`,onClick:()=>p==null?void 0:p(a.id),style:{position:"absolute",top:0,left:0,width:`${R(a.spanX)}px`,height:`${R(a.spanY)}px`,cursor:i==="view"?"pointer":"default"},children:[s.jsx("div",{className:"fe-table-visual","data-asset":a.assetFile||"",children:s.jsx("img",{className:`fe-asset fe-asset--${(a.assetFile||"").replace(/[^a-z0-9]+/gi,"_").toLowerCase()}`,style:{transform:`rotate(${le(a.rotationDeg??a.rotation??0)}deg) scale(${ie(a.scale,1)})`},src:a.assetFile?`${g}${a.assetFile}`:he(a.shape,a.seats),alt:""})}),s.jsxs("div",{className:"fe-table-overlay",children:[s.jsx("div",{className:"table-label",children:a.name||(a.tableNumber!=null?`Table ${a.tableNumber}`:"Table")}),a.seats!=null&&s.jsxs("div",{className:"table-seats",children:[a.seats," seats"]})]}),I&&s.jsxs("div",{className:`sbv-status-pill is-${w}`,children:[s.jsx("span",{className:"sbv-dot"}),s.jsxs("span",{className:"sbv-status-text",children:[D,K]})]})]})})()]},e)})})]})}function Ne(r){const i=(r||"").toLowerCase();return i==="occupied"||i==="busy"||i==="taken"?"occupied":i==="reserved"||i==="booked"?"reserved":i==="dirty"||i==="needs_cleaning"?"dirty":"empty"}function J(r){return c(`floor.status.${r}`,r)}function we({restaurantId:r,mountMode:i="page"}){const[p,j]=x.useState([]),[k,O]=x.useState(null),[_,W]=x.useState(null),[z,T]=x.useState(!0),[G,H]=x.useState(null),[M,S]=x.useState(null),[L,Y]=x.useState([]),[X,B]=x.useState(null),C=typeof document<"u"?document.getElementById("sb-floor-root"):null,q=String((C==null?void 0:C.getAttribute("data-click-mode"))||(C==null?void 0:C.getAttribute("data-mode"))||(i==="lobby"?"lobby":"page")).toLowerCase();x.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/floor-sections/${r}`);if(!e.ok)return;const n=await e.json(),o=Array.isArray(n)?n:(n==null?void 0:n.sections)??[];o.sort((a,v)=>(a.displayOrder??0)-(v.displayOrder??0)),Y(o)}catch{}})()},[r]);const A=x.useCallback(async()=>{try{const e=await fetch(`/api/floor-layouts/${r}/active`,{headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`HTTP ${e.status}`);const n=await e.json(),o=n&&n.id?n:(n==null?void 0:n.activeLayout)??null;if(!o){j([]),O(null),W(null),H(c("host.no_floor_plan","No active floor plan")),T(!1);return}j([o]),O(o.id),W(a=>a??o.id),H(null),T(!1),M&&((o.tables||[]).some(v=>String(v.id)===String(M))||S(null))}catch(e){H(c("host.err_load_map","Error loading floor map")+`: ${(e==null?void 0:e.message)??"unknown"}`),T(!1)}},[r,M]);x.useEffect(()=>{A();const e=setInterval(A,5e3);return()=>clearInterval(e)},[A]);const f=x.useMemo(()=>_?p.find(e=>e.id===_)??null:null,[p,_]),Z=x.useMemo(()=>f?X?{...f,tables:(f.tables||[]).filter(e=>e.sectionId===X)}:f:null,[f,X]),b=x.useMemo(()=>!f||!M?null:(f.tables||[]).find(e=>String(e.id)===String(M))??null,[f,M]),u=x.useMemo(()=>{if(!f||!b)return null;const e=f.tableStatuses;if(!Array.isArray(e))return null;const n=e.find(a=>String(a.tableId)===String(b.id));if(n)return n;const o=(b==null?void 0:b.tableNumber)??(b==null?void 0:b.number);return e.find(a=>a.tableNumber===o)??null},[f,b]),F=x.useMemo(()=>Ne(u==null?void 0:u.status),[u]),te=x.useCallback(e=>{S(e);try{const n=typeof document<"u"?document.getElementById("sb-floor-root"):null,o=((f==null?void 0:f.tables)||[]).find(v=>String(v.id)===String(e)),a=(o==null?void 0:o.tableNumber)??(o==null?void 0:o.number)??null;n&&n.dataset&&(n.dataset.selectedTableId=String(e),n.dataset.selectedTableNumber=a!=null?String(a):""),window.dispatchEvent(new CustomEvent("sb-floor-selection",{detail:{tableIds:[String(e)],tableNumbers:a!=null?[Number(a)]:[]}}))}catch{}},[f]),Q=()=>S(null),R=async e=>{const n=b==null?void 0:b.id;if(n)try{const o=await fetch(`/api/tables/${r}/${n}/status?status=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})});if(!o.ok){const a=await o.text().catch(()=>"");throw new Error(a||`HTTP ${o.status}`)}await A()}catch(o){console.error("Failed to update table status:",o)}},ee=async()=>{await R("dirty")},ne=async()=>{await R("empty")},re=async()=>{await R("reserved")},ae=async()=>{await R("empty")},t=`floor-editor sb-floor-view ${i==="lobby"?"is-embed":""}`;return z?s.jsx("div",{className:t,children:s.jsx("div",{className:"sbv-loading",children:c("floor.loading","Loading floor plan...")})}):G||!f?s.jsx("div",{className:t,children:s.jsxs("div",{className:"sbv-error",children:[s.jsx("div",{className:"sbv-error-title",children:c("host.err_load_map","Cannot load floor map")}),s.jsx("div",{className:"sbv-error-sub",children:G??c("host.err_load_map","Error loading floor map")}),s.jsx("button",{className:"sbv-retry",onClick:A,children:c("common.btn_refresh","Retry")})]})}):s.jsx("div",{className:t,children:s.jsxs("div",{className:"sbv-shell",children:[s.jsxs("div",{className:"sbv-left",children:[s.jsxs("div",{className:"layout-tabs-bar sbv-view-topbar",children:[s.jsxs("div",{className:"sbv-topbar-left",children:[s.jsx("div",{className:"sbv-topbar-title",children:c("host.floor_map_title","Restaurant Map (Live)")}),s.jsx("div",{className:"sbv-topbar-sub",children:c("floor.hints.controls","Drag to pan, Ctrl+wheel to zoom")})]}),s.jsxs("div",{className:"sbv-legend","aria-label":"Legend",children:[s.jsxs("span",{className:"sbv-pill is-empty",children:[s.jsx("span",{className:"sbv-dot"})," ",J("empty")]}),s.jsxs("span",{className:"sbv-pill is-occupied",children:[s.jsx("span",{className:"sbv-dot"})," ",J("occupied")]}),s.jsxs("span",{className:"sbv-pill is-reserved",children:[s.jsx("span",{className:"sbv-dot"})," ",J("reserved")]}),s.jsxs("span",{className:"sbv-pill is-dirty",children:[s.jsx("span",{className:"sbv-dot"})," ",J("dirty")]})]}),L.length>1&&s.jsxs("div",{className:"sbv-section-tabs",role:"tablist","aria-label":c("floor.sections.title","Sections"),children:[s.jsx("button",{className:`sbv-section-tab ${X===null?"is-active":""}`,onClick:()=>B(null),role:"tab","aria-selected":X===null,children:c("common.all","All")}),L.map(e=>s.jsx("button",{className:`sbv-section-tab ${X===e.id?"is-active":""}`,onClick:()=>B(e.id),role:"tab","aria-selected":X===e.id,children:e.name},e.id))]})]}),s.jsx("div",{className:"editor-content sbv-editor-content",children:s.jsx(xe,{layout:Z,selectedTableId:M,onTableClick:te,mode:"view"})})]}),s.jsx("aside",{className:`sbv-right ${i==="lobby"&&M?"open":""}`,"aria-label":c("host.table_details","Table details"),children:M?s.jsxs("div",{className:"sbv-right-panel",role:"dialog","aria-modal":"false",children:[s.jsxs("div",{className:"sbv-drawer-header",children:[s.jsx("div",{className:"sbv-drawer-title",children:c("host.table_details","Table Details")}),s.jsx("button",{className:"sbv-close",onClick:Q,"aria-label":c("common.btn_close","Close"),children:"✕"})]}),s.jsxs("div",{className:"sbv-drawer-body",children:[s.jsxs("div",{className:"sbv-table-number",children:[c("host.table_label","Table")," ",(b==null?void 0:b.tableNumber)??(b==null?void 0:b.number)??"—"]}),s.jsxs("div",{className:`sbv-status-row is-${F}`,children:[s.jsx("span",{className:"sbv-status-dot"}),s.jsx("span",{className:"sbv-status-label",children:c("host.table_status_label","Table Status")}),s.jsx("span",{className:"sbv-status-value",children:J(F)})]}),s.jsxs("div",{className:"sbv-kv",children:[s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:c("host.guest_name","Guest Name")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.guestName)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:c("host.num_guests","Guests")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.guestCount)!=null?String(u.guestCount):"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:c("host.reservation_time","Reservation Time")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.reservationTime)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:c("pos.waiter.items_label","Items")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.itemsCount)??"—"})]}),s.jsxs("div",{className:"sbv-kv-row",children:[s.jsx("div",{className:"sbv-kv-key",children:c("pos.waiter.subtotal","Subtotal")}),s.jsx("div",{className:"sbv-kv-val",children:(u==null?void 0:u.subtotal)??"—"})]})]})]}),s.jsxs("div",{className:"sbv-drawer-footer",children:[q==="lobby"||q==="waiter"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sbv-secondary-btn",onClick:ee,disabled:F==="dirty",children:c("floor.mark_dirty","Mark Dirty")}),s.jsx("button",{className:"sbv-success-btn",onClick:ne,disabled:F!=="dirty",children:c("floor.mark_clean","Mark Clean")})]}):null,q==="host"?s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"sbv-primary-btn",onClick:re,disabled:F==="reserved",children:c("floor.mark_reserved","Mark Reserved")}),s.jsx("button",{className:"sbv-secondary-btn",onClick:ae,disabled:F==="empty",children:c("floor.mark_empty","Mark Empty")})]}):null,F==="occupied"&&(u!=null&&u.orderId)&&(b!=null&&b.number)?s.jsx("a",{className:"sbv-primary-btn",href:`/waiter/${r}/${b.number}`,children:c("pos.waiter.btn_open_order","Open Order")}):null,s.jsx("button",{className:"sbv-secondary-btn",onClick:Q,children:c("common.btn_close","Close")})]})]}):s.jsxs("div",{className:"sbv-right-empty",children:[s.jsx("div",{className:"sbv-right-empty-title",children:c("host.table_details","Table Details")}),s.jsx("div",{className:"sbv-right-empty-sub",children:c("host.floor_map_help","Select a table on the map to view details.")})]})})]})})}const U=document.getElementById("sb-floor-root");if(!U)throw new Error("Missing #sb-floor-root");const ce=U.getAttribute("data-rid")||U.getAttribute("data-restaurant-id")||"",oe=U.getAttribute("data-click-mode")||U.getAttribute("data-mode")||"page",de=oe==="lobby"||oe==="host"?"lobby":"page";console.info("[FloorView] mount",{rid:ce,mountMode:de,clickMode:oe});ve.createRoot(U).render(s.jsx(x.StrictMode,{children:s.jsx(we,{restaurantId:ce,mountMode:de})}));
