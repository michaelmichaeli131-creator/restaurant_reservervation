/* SpotBook Floor Map — Stage 5 refined
   Purpose: Premium, calm, responsive floor-map UI for Host/Waiter/Owner view.
*/
:root{
  --sb-map-bg0: rgba(9, 16, 34, 1);
  --sb-map-bg1: rgba(11, 26, 62, 1);
  --sb-map-grid: rgba(180, 210, 255, 0.06);
  --sb-map-frame: rgba(140, 180, 255, 0.10);
  --sb-map-frame2: rgba(10, 18, 36, 0.9);

  --sb-table-surface0: rgba(20, 40, 92, 0.92);
  --sb-table-surface1: rgba(28, 66, 138, 0.88);
  --sb-table-stroke: rgba(160, 205, 255, 0.18);
  --sb-table-glow: rgba(120, 190, 255, 0.10);

  --sb-text: rgba(235, 245, 255, 0.98);
  --sb-muted: rgba(205, 225, 255, 0.70);
}

/* Wrapper */
.floor-wrapper,
.waiter-map-page #floor,
.host-page #floor,
#floor{
  width: 100%;
}

#floor .floor-stage,
.floor-stage{
  position: relative;
  width: 100%;
  border-radius: 18px;
  padding: clamp(10px, 2.2vw, 18px);
  background:
    radial-gradient(1200px 800px at 20% 0%, rgba(90,140,255,0.12), transparent 55%),
    radial-gradient(1000px 700px at 80% 20%, rgba(50,110,255,0.10), transparent 60%),
    linear-gradient(180deg, var(--sb-map-bg1), var(--sb-map-bg0));
  box-shadow:
    0 10px 28px rgba(0,0,0,0.35),
    inset 0 0 0 1px var(--sb-map-frame);
  overflow: hidden; /* prevent any horizontal overflow */
}

#floor .floor-stage::before,
.floor-stage::before{
  content:"";
  position:absolute;
  inset: 0;
  background:
    linear-gradient(var(--sb-map-grid) 1px, transparent 1px),
    linear-gradient(90deg, var(--sb-map-grid) 1px, transparent 1px);
  background-size: 44px 44px;
  opacity: 0.7;
  pointer-events: none;
  mask-image: radial-gradient(closest-side, rgba(0,0,0,0.85), rgba(0,0,0,0.15) 72%, transparent 100%);
}

#floor .floor-stage::after,
.floor-stage::after{
  content:"";
  position:absolute;
  inset: 10px;
  border-radius: 14px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06);
  pointer-events:none;
  opacity: .85;
}

/* Grid */
.floor-grid{
  position: relative;
  display: grid;
  gap: clamp(8px, 1.5vw, 12px);
  grid-template-columns: repeat(var(--cols), minmax(0, 1fr));
  grid-template-rows: repeat(var(--rows), minmax(0, 1fr));
  width: 100%;
  /* Keep it from becoming too tall on mobile; allow vertical scroll within stage if needed */
  min-height: min(70vh, 720px);
}

@media (max-width: 600px){
  .floor-grid{
    min-height: min(68vh, 560px);
  }
}

/* Table Button base */
.table{
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border-radius: 16px;
  border: 1px solid var(--sb-table-stroke);
  color: var(--sb-text);
  background:
    radial-gradient(180px 120px at 30% 18%, rgba(255,255,255,0.14), transparent 60%),
    linear-gradient(180deg, var(--sb-table-surface1), var(--sb-table-surface0));
  box-shadow:
    0 10px 18px rgba(0,0,0,0.30),
    inset 0 0 0 1px rgba(255,255,255,0.05);
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  overflow: hidden;
}

.table:hover{
  box-shadow:
    0 14px 26px rgba(0,0,0,0.36),
    0 0 0 6px var(--sb-table-glow),
    inset 0 0 0 1px rgba(255,255,255,0.06);
  transform: translateY(-1px);
}

.table:active{
  transform: translateY(0px) scale(0.99);
}

.table:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px rgba(120,190,255,0.35),
    0 14px 26px rgba(0,0,0,0.36),
    inset 0 0 0 1px rgba(255,255,255,0.06);
}

/* Shape variants (if data provides via class) */
.table.round{ border-radius: 999px; }
.table.square{ border-radius: 18px; }
.table.rect{ border-radius: 16px; }
.table.booth{ border-radius: 22px; }

/* Status indicator — elegant (top-right dot) */
.table::before{
  content:"";
  position:absolute;
  top: 10px;
  right: 10px;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: rgba(190, 220, 255, 0.45);
  box-shadow: 0 0 0 3px rgba(0,0,0,0.18), 0 0 0 1px rgba(255,255,255,0.06);
  opacity: .9;
}

.table.empty::before{ background: rgba(170, 215, 255, 0.35); }
.table.occupied::before{ background: rgba(110, 195, 255, 0.75); }
.table.reserved::before{ background: rgba(140, 170, 255, 0.70); }
.table.dirty::before{ background: rgba(90, 120, 255, 0.65); }

/* Text hierarchy */
.table-num{
  font-size: clamp(22px, 2.6vw, 34px);
  font-weight: 800;
  line-height: 1.0;
  letter-spacing: 0.5px;
  text-shadow: 0 6px 16px rgba(0,0,0,0.35);
}

.table-cap{
  margin-top: 6px;
  font-size: 13px;
  font-weight: 600;
  color: var(--sb-muted);
  opacity: 0.92;
}

.table-guest{
  margin-top: 8px;
  font-size: 15px;
  font-weight: 700;
  color: rgba(235,245,255,0.96);
  background: rgba(10,18,36,0.40);
  border: 1px solid rgba(160,205,255,0.10);
  padding: 6px 10px;
  border-radius: 999px;
  max-width: 92%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Reduce secondary detail for mobile for elegance */
@media (max-width: 600px){
  .table-cap{ font-size: 12px; }
  .table-guest{ font-size: 14px; padding: 5px 9px; }
  .table::before{ top: 8px; right: 8px; width: 9px; height: 9px; }
}

/* Make sure nothing forces horizontal scroll */
img, svg, canvas, video { max-width: 100%; }
